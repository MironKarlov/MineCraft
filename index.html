<!-- Кнопка для перевода -->
<button id="payButton">Перевести 1 рубль</button>

<script src="https://yookassa.ru/checkout-widget/v1/checkout-widget.js"></script>
<script>
  const checkout = new window.YooMoneyCheckoutWidget({
    confirmation_token: 'ВАШ_CONFIRMATION_TOKEN', // Получаете от вашего сервера
    return_url: 'https://ваш-сайт.ru/success', // Страница успеха
    error_callback: function(error) {
      console.error('Ошибка оплаты:', error);
    }
  });

  // Запрос токена с сервера при клике
  document.getElementById('payButton').addEventListener('click', async () => {
    const response = await fetch('/create-payment', { method: 'POST' });
    const { token } = await response.json();
    checkout.confirmation_token = token;
    checkout.render('payment-form');
  });
</script>const YooKassa = require('yookassa');
const yooKassa = new YooKassa({ shopId: 'Ваш_ID', secretKey: 'Ваш_ключ' });

app.post('/create-payment', async (req, res) => {
  const payment = await yooKassa.createPayment({
    amount: { value: '1.00', currency: 'RUB' },
    capture: true,
    confirmation: { type: 'embedded' },
    description: 'Перевод 1 рубль с сайта',
  });
  
  res.json({ token: payment.confirmation.confirmation_token });
});app.post('/payment-webhook', (req, res) => {
  const { event, object } = req.body;
  if (event === 'payment.succeeded' && object.status === 'succeeded') {
    console.log('Платеж успешен:', object.id);
    // Зачислите рубль на ваш счёт
  }
  res.status(200).send();
});
